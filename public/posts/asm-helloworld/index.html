<!DOCTYPE html>
<html lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  
    <title>Assembly Hello World :: Adenosine</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="A quick tutorial to learn how to write a *very* simple assembly program" />
<meta name="keywords" content="assembly, hello world" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="http://localhost:1313/posts/asm-helloworld/" />





  
  <link rel="stylesheet" href="http://localhost:1313/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/main.min.775ac2af004d44c22a6d000fbd1d9af529642f5cef27399d0280d180af2c2e9b.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/menu.min.310d32205bdedd6f43144e3c3273c9deecd238eba5f9108db5ea96ca0cfbe377.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/post.min.ad50c7f4d00e7975918f37fc74c6029e1959a40d66fb5b2c6564a8715e985573.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/syntax.min.e9ab635cf918bc84b901eb65c0b2caa74c9544245e3647c1af5c129896ef276e.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">


<link rel="stylesheet" href="http://localhost:1313/terminal.css">




<link rel="shortcut icon" href="http://localhost:1313/favicon.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">


<meta name="twitter:card" content="summary" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Assembly Hello World">
<meta property="og:description" content="A quick tutorial to learn how to write a *very* simple assembly program" />
<meta property="og:url" content="http://localhost:1313/posts/asm-helloworld/" />
<meta property="og:site_name" content="Adenosine" />

  
  
  <meta property="og:image" content="http://localhost:1313/">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">


  <meta property="article:published_time" content="2025-05-31 15:28:41 &#43;0300 &#43;03" />












</head>
<body>


<div class="container center">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Adenosine
  </div>
</a>

    </div>
    
      <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;▾</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="/about">About</a></li>
        
      
        
          <li><a href="/posts">Posts</a></li>
        
      
      
    </ul>
  </li>
</ul>

    
    
  </div>
  
    <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
        
          <li><a href="/about" >About</a></li>
        
      
        
          <li><a href="/posts" >Posts</a></li>
        
      
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="http://localhost:1313/posts/asm-helloworld/">Assembly Hello World</a>
  </h1>
  <div class="post-meta"><time class="post-date">2025-05-31</time><span class="post-author">Adenosine</span><span class="post-reading-time">5 min read (904 words)</span></div>

  
    <span class="post-tags">
      
      #<a href="http://localhost:1313/tags/asm/">asm</a>&nbsp;
      
      #<a href="http://localhost:1313/tags/tutorial/">tutorial</a>&nbsp;
      
    </span>
  
  


  
    <div class="table-of-contents">
      <h2>
        Table of Contents
      </h2>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#set-up">Set up</a></li>
    <li><a href="#hello-world">Hello World</a>
      <ul>
        <li><a href="#syscalls">syscalls</a></li>
        <li><a href="#writing-your-first-piece-of-assembly">writing your first piece of assembly</a></li>
        <li><a href="#calling-a-syscall">calling a syscall</a></li>
        <li><a href="#exiting">Exiting</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
  

  <div class="post-content"><div>
        <p>In this post, I will be going through how you would write a simple hello
world program in <a href="https://flatassembler.net/">FASM</a> for Linux.</p>
<p>Note: This post (and the entire blog) is licensed under <a href="https://www.gnu.org/licenses/gpl-3.0.en.html">GPLv3 License</a>
and is hosted on <a href="https://github.com/doomed-neko/website">GitHub</a></p>
<h2 id="set-up">Set up<a href="#set-up" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>First of all, download and install <a href="https://flatassembler.net/">Flat Assembler</a>.
On arch, you can install it using pacman as follows:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo pacman -S fasm
</span></span></code></pre></div><p>Next you will need to create a directory for this project containing our <code>main.s</code>
file, you can use <code>mkdir</code> and <code>touch</code> for that.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mkdir asm_hello
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> asm_hello
</span></span><span class="line"><span class="cl">touch main.s
</span></span></code></pre></div><p>and now we&rsquo;re ready to get our hands dirty!</p>
<h2 id="hello-world">Hello World<a href="#hello-world" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>Now for the assembly part, first of all we need to understand how assembly
communicates with the system.</p>
<p>It is done via what is called System Calls (or syscalls for short), functions
that tell the operating system what to do with the hardware, like reading a file
or writing to it. And unlike normal languages where you supply arguments (or parameters)
to your functions, in assembly we have <a href="https://en.wikipedia.org/wiki/Processor_register">registers</a>.</p>
<p>In this post, we&rsquo;ll be working with 64 bit assembly, different architectures
might use registers different from what you&rsquo;ll be seeing here.</p>
<h3 id="syscalls">syscalls<a href="#syscalls" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>To write a simple hello world program in assembly, first we&rsquo;ll need
to find the number for the <code>Write</code> syscall, I like using
<a href="https://chromium.googlesource.com/chromiumos/docs/&#43;/master/constants/syscalls.md#tables">this table</a>
as a reference for syscalls, we can see that the <code>Write</code> syscall is number 1,
let&rsquo;s keep that in mind.</p>
<p>As we can see from the table, <code>Write</code> takes 3 arguments:</p>
<ol>
<li><code>fd</code>: The id of the file to write to.</li>
<li><code>buf</code>: A pointer to the buffer which contains the text to be written to the file.</li>
<li><code>count</code>: Number of bytes to read from the buffer.</li>
</ol>
<p>In Linux everything is a file, including stdout. Some files have a constant
<a href="https://en.wikipedia.org/wiki/File_descriptor">File Descriptors</a>
like stdin(0), stdout(1) and stderr(2).</p>
<p>To print text to the screen we will be writing to stdout, using the <code>Write</code> syscall.
Now we have the number of the syscall we need and the file descriptor,
all that&rsquo;s left is to just define some text, which is what we&rsquo;ll do now</p>
<h3 id="writing-your-first-piece-of-assembly">writing your first piece of assembly<a href="#writing-your-first-piece-of-assembly" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>Open <code>main.s</code> in your favourite editor and let&rsquo;s start with some boilerplate.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nasm" data-lang="nasm"><span class="line"><span class="cl"><span class="nf">format</span> <span class="nv">ELF64</span> <span class="nv">executable</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">segment</span> <span class="nv">readable</span> <span class="nv">executable</span>
</span></span><span class="line"><span class="cl"><span class="nf">entry</span> <span class="nv">main</span>
</span></span><span class="line"><span class="cl"><span class="nl">main:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">segment</span> <span class="nv">readable</span> <span class="nv">writable</span>
</span></span></code></pre></div><p>In the first line, we defined that our code should be compiled to
<a href="https://en.wikipedia.org/wiki/Executable_and_Linkable_Format">ELF</a> format.</p>
<p>Next, we defined a segment that can be read and executed by the operating system,
inside this segment lies our entry point, them <code>main</code> section</p>
<p>After that, we defined a writable section in which we&rsquo;ll store our variables.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nasm" data-lang="nasm"><span class="line"><span class="cl"><span class="nf">...</span>
</span></span><span class="line"><span class="cl"><span class="k">segment</span> <span class="nv">readable</span> <span class="nv">writable</span>
</span></span><span class="line"><span class="cl"><span class="nf">msg</span> <span class="nv">db</span> <span class="s">&#34;Hello World&#34;</span><span class="p">,</span> <span class="mi">10</span>
</span></span><span class="line"><span class="cl"><span class="nf">msg_len</span> <span class="err">=</span> <span class="kc">$</span> <span class="o">-</span> <span class="nv">msg</span>
</span></span></code></pre></div><p>Alright now this might seem weird to you, but it is really simple.</p>
<p>We defined a variable called <code>msg</code> using the <code>db</code> keyword which stands for
<code>define byte</code>, there are other sizes you can use as well but this fits our uses
for now.</p>
<p>And then to calculate then size of this string, we used the dollar sign <code>$</code> which
represents the current memory position, and subtracted the start address of <code>msg</code>,
this returns the exact size of <code>msg</code>, now we have all the puzzle pieces!</p>
<h3 id="calling-a-syscall">calling a syscall<a href="#calling-a-syscall" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>To tell the system which syscall you want, you &ldquo;move&rdquo; it&rsquo;s number into the
<code>rax</code> register.
We can do that like so:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nasm" data-lang="nasm"><span class="line"><span class="cl"><span class="nf">...</span>
</span></span><span class="line"><span class="cl"><span class="k">segment</span> <span class="nv">readable</span> <span class="nv">executable</span>
</span></span><span class="line"><span class="cl"><span class="nf">entry</span> <span class="nv">main</span>
</span></span><span class="line"><span class="cl"><span class="nl">main:</span>
</span></span><span class="line"><span class="cl">  <span class="nf">mov</span> <span class="nb">rax</span><span class="p">,</span> <span class="mi">1</span> <span class="c1">;; 1 is the number of Write syscall</span>
</span></span></code></pre></div><p>As you can see, we used the <code>mov</code> instruction to move a value into a register.
We first specify the target register and then the value.</p>
<p>Now to specify the arguments.</p>
<p>Here in 64bit assembly, we use the <code>rdi</code>, <code>rsi</code>, <code>rdx</code>, <code>r10</code>, <code>r9</code>, etc
registers to specify arguments.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nasm" data-lang="nasm"><span class="line"><span class="cl"><span class="nf">...</span>
</span></span><span class="line"><span class="cl"><span class="k">segment</span> <span class="nv">readable</span> <span class="nv">executable</span>
</span></span><span class="line"><span class="cl"><span class="nf">entry</span> <span class="nv">main</span>
</span></span><span class="line"><span class="cl"><span class="nl">main:</span>
</span></span><span class="line"><span class="cl">  <span class="nf">mov</span> <span class="nb">rax</span><span class="p">,</span> <span class="mi">1</span> <span class="c1">;; 1 is the number of Write syscall</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nf">mov</span> <span class="nb">rdi</span><span class="p">,</span> <span class="mi">1</span> <span class="c1">;; the file descriptor for STDOUT</span>
</span></span><span class="line"><span class="cl">  <span class="nf">mov</span> <span class="nb">rsi</span><span class="p">,</span> <span class="nv">msg</span>
</span></span><span class="line"><span class="cl">  <span class="nf">mov</span> <span class="nb">rdx</span><span class="p">,</span> <span class="nv">msg_len</span>
</span></span><span class="line"><span class="cl">  <span class="nf">syscall</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">...</span>
</span></span></code></pre></div><p>Now we that we have all the arguments set, we use the <code>syscall</code> instruction
to notify the operating system and execute the requested syscall.</p>
<p>So the final code would look like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nasm" data-lang="nasm"><span class="line"><span class="cl"><span class="nf">format</span> <span class="nv">ELF64</span> <span class="nv">executable</span>
</span></span><span class="line"><span class="cl"><span class="k">segment</span> <span class="nv">readable</span> <span class="nv">executable</span>
</span></span><span class="line"><span class="cl"><span class="nf">entry</span> <span class="nv">main</span>
</span></span><span class="line"><span class="cl"><span class="nl">main:</span>
</span></span><span class="line"><span class="cl">  <span class="nf">mov</span> <span class="nb">rax</span><span class="p">,</span> <span class="mi">1</span> <span class="c1">;; 1 is the number of Write syscall</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nf">mov</span> <span class="nb">rdi</span><span class="p">,</span> <span class="mi">1</span> <span class="c1">;; the file descriptor for STDOUT</span>
</span></span><span class="line"><span class="cl">  <span class="nf">mov</span> <span class="nb">rsi</span><span class="p">,</span> <span class="nv">msg</span>
</span></span><span class="line"><span class="cl">  <span class="nf">mov</span> <span class="nb">rdx</span><span class="p">,</span> <span class="nv">msg_len</span>
</span></span><span class="line"><span class="cl">  <span class="nf">syscall</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">segment</span> <span class="nv">readable</span> <span class="nv">writable</span>
</span></span><span class="line"><span class="cl"><span class="nf">msg</span> <span class="nv">db</span> <span class="s">&#34;Hello World&#34;</span><span class="p">,</span> <span class="mi">10</span>
</span></span><span class="line"><span class="cl"><span class="nf">msg_len</span> <span class="err">=</span> <span class="kc">$</span> <span class="o">-</span> <span class="nv">msg</span>
</span></span></code></pre></div><p>Now we&rsquo;ll compile our code using <code>fasm</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">fasm ./moain.s
</span></span></code></pre></div><p><code>fasm</code> produces a binary file, we need to set is as an executable file as so:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chmod +x ./main
</span></span></code></pre></div><p>Et voila! Now run your binary and see as it prints the message:</p>
<p><img src="/img/asm-hello-1.png" alt="Image file showing the binary printing hello world and SEGFAULT’ing"></p>
<p>It works, but segfaults for some reason. That&rsquo;s because we never told
the OS what to do after printing, usually languages do this for you automatically
but here in assembly, you have to tell the system to exit manually.</p>
<h3 id="exiting">Exiting<a href="#exiting" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>If we go back to the syscalls table and search for <code>exit</code>, we can see that it&rsquo;s
number 60, we need to call this syscall to exit correctly.</p>
<p>It&rsquo;s not very different from the previous section, and this syscall only
takes one argument, which is the <a href="https://en.wikipedia.org/wiki/Exit_status">exit status</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nasm" data-lang="nasm"><span class="line"><span class="cl"><span class="nf">...</span>
</span></span><span class="line"><span class="cl">  <span class="nf">mov</span> <span class="nb">rax</span><span class="p">,</span> <span class="mi">60</span> <span class="c1">;; the number of Exit syscall</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nf">mov</span> <span class="nb">rdi</span><span class="p">,</span> <span class="mi">0</span> <span class="c1">;; EXIT_SUCCESS</span>
</span></span><span class="line"><span class="cl">  <span class="nf">syscall</span>
</span></span><span class="line"><span class="cl"><span class="nf">...</span>
</span></span></code></pre></div><p>Now if we recompile, our program exits without any errors:
<img src="/img/asm-hello-2.png" alt="Hello world program exiting successfully"></p>
<p>Alright! Now we have wrote our first assembly program.</p>

      </div></div>

  
    

  

  
    

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2025 Powered by <a href="https://gohugo.io">Hugo</a></span>
    
      <span>:: <a href="https://github.com/panr/hugo-theme-terminal" target="_blank">Theme</a> made by <a href="https://github.com/panr" target="_blank">panr</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>





  
</div>

</body>
</html>
